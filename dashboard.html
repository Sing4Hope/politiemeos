<script>
  // Simuleer wie is ingelogd (je zou dit normaal uit sessie of backend halen)
  const loggedInUser = localStorage.getItem("loggedInUser") || "agent01";

  const allowedToAdd = ["koen_s", "thijs"];
  const addForm = document.getElementById("addForm");

  if (allowedToAdd.includes(loggedInUser)) {
    addForm.style.display = "block";
    addForm.style.opacity = 0;
    addForm.style.transform = "translateY(30px)";
    setTimeout(() => {
      addForm.style.transition = "opacity 0.5s, transform 0.5s";
      addForm.style.opacity = 1;
      addForm.style.transform = "translateY(0)";
    }, 100);
  }

  function animatePerson(div) {
    div.style.opacity = 0;
    div.style.transform = "translateX(40px) scale(0.95)";
    setTimeout(() => {
      div.style.transition = "opacity 0.5s, transform 0.5s";
      div.style.opacity = 1;
      div.style.transform = "translateX(0) scale(1)";
    }, 10);
  }

  function shakeForm() {
    addForm.style.animation = "shake 0.4s";
    addForm.addEventListener("animationend", () => {
      addForm.style.animation = "";
    }, { once: true });
  }

  function addPerson() {
    const name = document.getElementById("newName").value.trim();
    const age = document.getElementById("newAge").value.trim();

    if (name && age) {
      const personList = document.getElementById("personList");
      const div = document.createElement("div");
      div.className = "person";
      div.textContent = `${name} â€“ ${age} jaar`;
      personList.appendChild(div);
      animatePerson(div);

      document.getElementById("newName").value = "";
      document.getElementById("newAge").value = "";
    } else {
      shakeForm();
    }
  }

  function logout() {
    localStorage.removeItem("loggedInUser");
    document.body.style.transition = "opacity 0.5s";
    document.body.style.opacity = 0;
    setTimeout(() => {
      window.location.href = "login.html";
    }, 500);
  }
</script>
<style>
  @keyframes shake {
    0% { transform: translateX(0);}
    20% { transform: translateX(-8px);}
    40% { transform: translateX(8px);}
    60% { transform: translateX(-6px);}
    80% { transform: translateX(6px);}
    100% { transform: translateX(0);}
  }
</style>
